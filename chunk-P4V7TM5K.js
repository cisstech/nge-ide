import{b as qe,d as V,e as De}from"./chunk-HXY2ZCR4.js";import{d as Te,f as Me,h as Ee,k as Ie}from"./chunk-XO3YPVKL.js";import{Ea as ze,Ha as Se,Ia as we,L as me,M as ue,Oa as xe,P as ge,Pa as ke,Q as fe,S as Ce,W as ve,bb as be,ca as _e,db as Pe,ea as ye}from"./chunk-THU2NYFJ.js";import{ha as de}from"./chunk-PRTI5VBN.js";import{$b as q,Aa as x,Ba as R,Bb as Y,Ca as G,Cb as M,Eb as Z,Fb as ee,Gb as te,Hb as d,Ib as h,Ja as B,Jb as C,Ka as u,Kb as E,La as g,Lb as I,Nb as A,Pb as b,Pc as O,Rb as p,Sa as k,Sb as ne,Tb as ie,Tc as he,Ua as $,Vb as re,Wb as ae,Wc as pe,Xb as oe,Yb as j,Zb as S,a as P,cc as W,dc as w,eb as o,ec as N,fb as v,gc as U,i as L,mc as H,nc as se,oc as ce,pc as le,ra as D,rb as J,ub as f,vb as X,wb as c,xb as T,xc as F,yb as y,zc as K}from"./chunk-PL3RMG6N.js";var Oe=["nzType","avatar"];var Ve=["*"];function Le(i,r){if(i&1&&(d(0,"div",1),C(1,"nz-skeleton-element",4),h()),i&2){let a=p(2);o(),c("nzSize",a.avatar.size||"default")("nzShape",a.avatar.shape||"circle")}}function Be(i,r){if(i&1&&C(0,"h3",5),i&2){let a=p(2);T("width",a.toCSSUnit(a.title.width))}}function je(i,r){if(i&1&&C(0,"li"),i&2){let a=r.$index,t=p(3);T("width",t.toCSSUnit(t.widthList[a]))}}function Ue(i,r){if(i&1&&(d(0,"ul",3),ee(1,je,1,2,"li",6,Z),h()),i&2){let a=p(2);o(),te(a.rowsList)}}function He(i,r){if(i&1&&(f(0,Le,2,2,"div",1),d(1,"div",0),f(2,Be,1,2,"h3",2)(3,Ue,3,0,"ul",3),h()),i&2){let a=p();M(a.nzAvatar?0:-1),o(2),M(a.nzTitle?2:-1),o(),M(a.nzParagraph?3:-1)}}function Ke(i,r){i&1&&ie(0)}var Qe=(()=>{let r=class r{constructor(){this.nzActive=!1,this.nzBlock=!1}};r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=G({type:r,selectors:[["nz-skeleton-element"]],hostAttrs:[1,"ant-skeleton","ant-skeleton-element"],hostVars:4,hostBindings:function(n,e){n&2&&y("ant-skeleton-active",e.nzActive)("ant-skeleton-block",e.nzBlock)},inputs:{nzActive:[2,"nzActive","nzActive",K],nzType:"nzType",nzBlock:[2,"nzBlock","nzBlock",K]},standalone:!0,features:[J]});let i=r;return i})();var Ge=(()=>{let r=class r{constructor(){this.nzShape="circle",this.nzSize="default",this.styleMap={}}ngOnChanges(t){if(t.nzSize&&typeof this.nzSize=="number"){let n=`${this.nzSize}px`;this.styleMap={width:n,height:n,"line-height":n}}else this.styleMap={}}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=x({type:r,selectors:[["nz-skeleton-element","nzType","avatar"]],inputs:{nzShape:"nzShape",nzSize:"nzSize"},standalone:!0,features:[B,U],attrs:Oe,decls:1,vars:9,consts:[[1,"ant-skeleton-avatar",3,"ngStyle"]],template:function(n,e){n&1&&C(0,"span",0),n&2&&(y("ant-skeleton-avatar-square",e.nzShape==="square")("ant-skeleton-avatar-circle",e.nzShape==="circle")("ant-skeleton-avatar-lg",e.nzSize==="large")("ant-skeleton-avatar-sm",e.nzSize==="small"),c("ngStyle",e.styleMap))},dependencies:[he],encapsulation:2,changeDetection:0});let i=r;return i})();var Re=(()=>{let r=class r{constructor(t){this.cdr=t,this.nzActive=!1,this.nzLoading=!0,this.nzRound=!1,this.nzTitle=!0,this.nzAvatar=!1,this.nzParagraph=!0,this.rowsList=[],this.widthList=[]}toCSSUnit(t=""){return de(t)}getTitleProps(){let t=!!this.nzAvatar,n=!!this.nzParagraph,e="";return!t&&n?e="38%":t&&n&&(e="50%"),P({width:e},this.getProps(this.nzTitle))}getAvatarProps(){let t=this.nzTitle&&!this.nzParagraph?"square":"circle";return P({shape:t,size:"large"},this.getProps(this.nzAvatar))}getParagraphProps(){let t=!!this.nzAvatar,n=!!this.nzTitle,e={};return(!t||!n)&&(e.width="61%"),!t&&n?e.rows=3:e.rows=2,P(P({},e),this.getProps(this.nzParagraph))}getProps(t){return t&&typeof t=="object"?t:{}}getWidthList(){let{width:t,rows:n}=this.paragraph,e=[];return t&&Array.isArray(t)?e=t:t&&!Array.isArray(t)&&(e=[],e[n-1]=t),e}updateProps(){this.title=this.getTitleProps(),this.avatar=this.getAvatarProps(),this.paragraph=this.getParagraphProps(),this.rowsList=[...Array(this.paragraph.rows)],this.widthList=this.getWidthList(),this.cdr.markForCheck()}ngOnInit(){this.updateProps()}ngOnChanges(t){(t.nzTitle||t.nzAvatar||t.nzParagraph)&&this.updateProps()}};r.\u0275fac=function(n){return new(n||r)(v(F))},r.\u0275cmp=x({type:r,selectors:[["nz-skeleton"]],hostAttrs:[1,"ant-skeleton"],hostVars:6,hostBindings:function(n,e){n&2&&y("ant-skeleton-with-avatar",!!e.nzAvatar)("ant-skeleton-active",e.nzActive)("ant-skeleton-round",!!e.nzRound)},inputs:{nzActive:"nzActive",nzLoading:"nzLoading",nzRound:"nzRound",nzTitle:"nzTitle",nzAvatar:"nzAvatar",nzParagraph:"nzParagraph"},exportAs:["nzSkeleton"],standalone:!0,features:[B,U],ngContentSelectors:Ve,decls:2,vars:1,consts:[[1,"ant-skeleton-content"],[1,"ant-skeleton-header"],[1,"ant-skeleton-title",3,"width"],[1,"ant-skeleton-paragraph"],["nzType","avatar",3,"nzSize","nzShape"],[1,"ant-skeleton-title"],[3,"width"]],template:function(n,e){n&1&&(ne(),f(0,He,4,3,"div",0)(1,Ke,1,0)),n&2&&M(e.nzLoading?0:1)},dependencies:[Qe,Ge],encapsulation:2,changeDetection:0});let i=r;return i})(),Ae=(()=>{let r=class r{};r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=R({type:r}),r.\u0275inj=D({});let i=r;return i})();function Xe(i,r){if(i&1){let a=A();d(0,"div",4)(1,"div",5),b("click",function(){u(a);let n=p();return n.matchCase=!n.matchCase,g(n.onKeyEnter())}),h(),d(2,"div",6),b("click",function(){u(a);let n=p();return n.matchWord=!n.matchWord,g(n.onKeyEnter())}),h(),d(3,"div",7),b("click",function(){u(a);let n=p();return n.useRegex=!n.useRegex,g(n.onKeyEnter())}),h()()}if(i&2){let a=p();o(),y("checked",a.matchCase),o(),y("checked",a.matchWord),o(),y("checked",a.useRegex)}}function Ye(i,r){if(i&1&&(d(0,"div",8),S(1),h()),i&2){let a=p();o(),q(" ",a.error,`
`)}}var We=(()=>{let r=class r{constructor(){this.ariaLabel="",this.placeholder="",this.query="",this.queryChange=new k,this.useRegex=!1,this.useRegexChange=new k,this.matchWord=!1,this.matchWordChange=new k,this.matchCase=!1,this.matchCaseChange=new k,this.patternChange=new k,this.search=new k,this.controls=!1,this.error=""}ngOnInit(){}onKeyEnter(){if(this.error="",this.controls)try{let n=function(m){return m.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};var t=n;let e=this.query;this.useRegex||(e=n(this.query));let l=["g"];this.matchCase||l.push("i"),this.matchWord?this.pattern=new RegExp(`(\\b${e}\\b)`,l.join("")):this.pattern=new RegExp(`(${e})`,l.join(""))}catch(n){this.error=n.message}this.queryChange.emit(this.query),this.matchCaseChange.emit(this.matchCase),this.matchWordChange.emit(this.matchWord),this.useRegexChange.emit(this.useRegex),this.patternChange.emit(this.pattern),this.error||this.search.emit()}};r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=x({type:r,selectors:[["ide-search-input"]],inputs:{ariaLabel:"ariaLabel",placeholder:"placeholder",query:"query",useRegex:"useRegex",matchWord:"matchWord",matchCase:"matchCase",pattern:"pattern",controls:"controls"},outputs:{queryChange:"queryChange",useRegexChange:"useRegexChange",matchWordChange:"matchWordChange",matchCaseChange:"matchCaseChange",patternChange:"patternChange",search:"search"},decls:4,vars:8,consts:[[1,"search-container"],["type","text","spellcheck","false","autocapitalize","off",1,"app-input-box",3,"keydown.enter","ngModelChange","title","placeholder","ngModel"],["class","search-controls",4,"ngIf"],["class","search-error",4,"ngIf"],[1,"search-controls"],["title","Match Case","tabindex","0","role","checkbox","aria-checked","false","aria-label","Match Case",1,"search-control","codicon","codicon-case-sensitive",3,"click"],["title","Match Whole Word","tabindex","0","role","checkbox","aria-checked","false","aria-label","Match Whole Word",1,"search-control","codicon","codicon-whole-word",3,"click"],["title","Use Regular Expression","tabindex","0","role","checkbox","aria-checked","true","aria-label","Use Regular Expression",1,"search-control","codicon","codicon-regex",3,"click"],[1,"search-error"]],template:function(n,e){n&1&&(d(0,"div",0)(1,"input",1),b("keydown.enter",function(){return e.onKeyEnter()}),N("ngModelChange",function(m){return w(e.query,m)||(e.query=m),m}),h(),f(2,Xe,4,6,"div",2),h(),f(3,Ye,2,1,"div",3)),n&2&&(o(),y("error",!!e.error),c("title",e.placeholder)("placeholder",e.placeholder),W("ngModel",e.query),X("aria-label",e.ariaLabel),o(),c("ngIf",e.controls),o(),c("ngIf",e.error))},dependencies:[O,Te,Me,Ee],styles:[".search-container[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;box-sizing:border-box;position:relative}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;width:100%;font-size:12px;padding:4px}.search-container[_ngcontent-%COMP%]   .search-controls[_ngcontent-%COMP%]{display:flex;position:absolute;right:4px}.search-container[_ngcontent-%COMP%]   .search-control[_ngcontent-%COMP%]{cursor:pointer;border-color:transparent;background-color:transparent;margin:1px}.search-container[_ngcontent-%COMP%]   .search-control.checked[_ngcontent-%COMP%]{border-color:#007acc00;background-color:#46464633}.search-error[_ngcontent-%COMP%]{margin:8px 0}.app-input-box[_ngcontent-%COMP%]{width:100%;padding:.1rem .3rem;font-size:1rem;line-height:1.5;background-clip:padding-box;border:1px solid #ced4da;border-radius:.15rem;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out}.app-input-box[_ngcontent-%COMP%]:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.app-input-box.error[_ngcontent-%COMP%]{border-color:#a1260d;outline:0;box-shadow:0 0 0 .2rem #a1260d40}"],changeDetection:0});let i=r;return i})();function et(i,r){if(i&1&&(E(0),d(1,"div"),S(2),h(),I()),i&2){let a=p();o(2),q(" Aucun r\xE9sultat pour '",a.form.query,"' ")}}function tt(i,r){i&1&&(E(0),C(1,"nz-skeleton",7)(2,"nz-skeleton",7)(3,"nz-skeleton",7),I()),i&2&&(o(),c("nzActive",!0),o(),c("nzActive",!0),o(),c("nzActive",!0))}function nt(i,r){if(i&1&&(E(0),C(1,"div"),S(2,"\xA0 "),C(3,"ui-icon",10),H(4,"iconFile"),S(5,"\xA0 "),C(6,"span",11),I()),i&2){let a=p().$implicit,t=p(),n=j(5);o(),Y("codicon codicon-",n.isExpanded(a)?"chevron-down":"chevron-right",""),o(2),c("icon",se(4,6,a.name)),o(3),c("highlight",a.name)("highlightPattern",t.pattern)}}function it(i,r){if(i&1&&(d(0,"div")(1,"span"),S(2),h(),S(3,"\xA0 "),C(4,"span",11),h()),i&2){let a=p().$implicit,t=p();T("margin","0 8px"),o(2),q("",a.data.lineno,":"),o(2),c("highlight",a.name)("highlightPattern",t.pattern)}}function rt(i,r){if(i&1&&(E(0),d(1,"span",8),H(2,"fileName"),f(3,nt,7,8,"ng-container",9)(4,it,5,5,"ng-template",null,1,le),h(),I()),i&2){let a=r.$implicit,t=j(5);o(),c("nz-tooltip",ce(2,3,a.data.resource,!0)),o(2),c("ngIf",a.expandable)("ngIfElse",t)}}var Ne=(()=>{let r=class r{get isEmpty(){return!this.searching&&!!this.form.query.length&&this.nodes.length===0}constructor(t,n,e,l,m,s,Fe){this.ideService=t,this.elementRef=n,this.fileService=e,this.editorService=l,this.storageService=m,this.changeDetectorRef=s,this.notificationService=Fe,this.storageId="sidebar.view.search.query",this.subscriptions=[],this.adapter={id:"search.tree",idProvider:_=>_.id,nameProvider:_=>_.label,childrenProvider:_=>_.children||[],isExpandable:_=>{var z;return!!((z=_.children)!=null&&z.length)},actions:{mouse:{click:_=>{let z=_.node;z&&(z.children||this.editorService.open(z.resource,{position:{line:z.lineno||1,column:z.label.indexOf(this.form.query)||0}}).catch(this.notificationService.publishError.bind(this)))}}}},this.form=_e(),this.nodes=[],this.searching=!1}ngOnInit(){return L(this,null,function*(){this.subscriptions.push(this.ideService.onBeforeStop(()=>{this.saveState()})),this.restoreState()})}ngOnDestroy(){this.saveState(),this.subscriptions.forEach(t=>t.unsubscribe())}ngAfterViewChecked(){let t=this.elementRef.nativeElement.offsetHeight+"px";if(t!==this.adapter.treeHeight){let n="32px * 1",e="8px * 4";this.adapter.treeHeight=`calc(${t} - ${n} - ${e})`}}search(){return L(this,null,function*(){if(this.searching=!0,this.form.query=this.form.query.trim(),this.changeDetectorRef.markForCheck(),!this.form.query){this.nodes=[],this.searching=!1,this.changeDetectorRef.markForCheck();return}try{this.nodes=(yield this.fileService.search(this.form)).map(this.createNode.bind(this))}catch(t){this.nodes=[],this.notificationService.publishError(t)}finally{this.searching=!1,this.changeDetectorRef.markForCheck()}})}createNode(t){let n=t.entry.toString(!0);return{id:n,label:this.fileService.entryName(t.entry),resource:t.entry,children:t.matches.map((e,l)=>({id:n+"#"+l,label:e.match,lineno:e.lineno,resource:t.entry}))}}saveState(){this.storageService.set(this.storageId,this.form).subscribe()}restoreState(){this.storageService.get(this.storageId,this.form).subscribe(t=>{this.form=t,this.search()})}};r.\u0275fac=function(n){return new(n||r)(v(xe),v($),v(ye),v(ze),v(ke),v(F),v(ve))},r.\u0275cmp=x({type:r,selectors:[["ide-sidebar-search"]],viewQuery:function(n,e){if(n&1&&re(V,7),n&2){let l;ae(l=oe())&&(e.tree=l.first)}},decls:7,vars:10,consts:[["treeRef",""],["leafTemplate",""],[1,"input-wrapper"],["placeholder","Rechercher","arialLabel","Rechercher: \xC9crivez votre texte et pressez Entrer pour rechercher or Esc pour annuler",3,"queryChange","useRegexChange","matchCaseChange","matchWordChange","patternChange","search","controls","query","useRegex","matchCase","matchWord","pattern"],[4,"ngIf"],[3,"nodes","adapter"],[4,"treeNode"],[3,"nzActive"],[1,"tree-label",3,"nz-tooltip"],[4,"ngIf","ngIfElse"],[3,"icon"],[3,"highlight","highlightPattern"]],template:function(n,e){if(n&1){let l=A();d(0,"div",2)(1,"ide-search-input",3),N("queryChange",function(s){return u(l),w(e.form.query,s)||(e.form.query=s),g(s)})("useRegexChange",function(s){return u(l),w(e.form.useRegex,s)||(e.form.useRegex=s),g(s)})("matchCaseChange",function(s){return u(l),w(e.form.matchCase,s)||(e.form.matchCase=s),g(s)})("matchWordChange",function(s){return u(l),w(e.form.matchWord,s)||(e.form.matchWord=s),g(s)})("patternChange",function(s){return u(l),w(e.pattern,s)||(e.pattern=s),g(s)}),b("search",function(){return u(l),g(e.search())}),h()(),f(2,et,3,1,"ng-container",4)(3,tt,4,3,"ng-container",4),d(4,"ui-tree",5,0),f(6,rt,6,6,"ng-container",6),h()}n&2&&(o(),c("controls",!0),W("query",e.form.query)("useRegex",e.form.useRegex)("matchCase",e.form.matchCase)("matchWord",e.form.matchWord)("pattern",e.pattern),o(),c("ngIf",e.isEmpty),o(),c("ngIf",e.searching),o(),c("nodes",e.nodes)("adapter",e.adapter))},dependencies:[O,me,Re,Se,ge,V,qe,We,be,fe],styles:["[_nghost-%COMP%] {position:relative;display:block;height:100%;padding:8px}[_nghost-%COMP%]  cdk-virtual-scroll-viewport{overflow-x:hidden}[_nghost-%COMP%]  .highlight{color:#0066bf}.input-wrapper[_ngcontent-%COMP%]{height:32px;margin:0 0 8px}.tree-label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;width:100%;height:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}"],changeDetection:0});let i=r;return i})();var Bt=(()=>{let r=class r{constructor(){this.component=Ne}};r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=R({type:r}),r.\u0275inj=D({imports:[pe,Ie,ue,Ae,Pe,we,Ce,De]});let i=r;return i})();export{Bt as a};
