import{Ea as ei,Ma as ni,W as ti,b as X}from"./chunk-3BR34L72.js";import{aa as Q,pa as Y,qa as ii,x as J,y as K}from"./chunk-PRTI5VBN.js";import{Aa as g,Ac as G,Ba as u,Cb as C,Hb as a,Ib as c,Ja as F,Jb as z,M as T,Pb as _,Pc as W,Rb as S,Sb as R,Tb as q,U as N,Uc as H,Wc as Z,Yb as L,Zb as P,_ as O,_b as A,eb as s,fb as d,gc as B,hc as U,i as D,ia as k,ja as j,ka as f,o as w,p as x,pc as V,q as M,ra as m,rb as $,ub as h,v as I,wb as p,xc as y,yb as v,zc as b}from"./chunk-PL3RMG6N.js";var ci=["*"];function pi(n,t){n&1&&(a(0,"span",2),z(1,"i",3)(2,"i",3)(3,"i",3)(4,"i",3),c())}function li(n,t){}function hi(n,t){if(n&1&&(a(0,"div",6),P(1),c()),n&2){let r=S(2);s(),A(r.nzTip)}}function fi(n,t){if(n&1&&(a(0,"div")(1,"div",4),h(2,li,0,0,"ng-template",5)(3,hi,2,1,"div",6),c()()),n&2){let r=S(),i=L(1);s(),v("ant-spin-rtl",r.dir==="rtl")("ant-spin-spinning",r.isLoading)("ant-spin-lg",r.nzSize==="large")("ant-spin-sm",r.nzSize==="small")("ant-spin-show-text",r.nzTip),s(),p("ngTemplateOutlet",r.nzIndicator||i),s(),C(r.nzTip?3:-1)}}function mi(n,t){if(n&1&&(a(0,"div",7),q(1),c()),n&2){let r=S();v("ant-spin-blur",r.isLoading)}}var oi="spin",si=(()=>{let t=class t{constructor(i,e,o){this.nzConfigService=i,this.cdr=e,this.directionality=o,this._nzModuleName=oi,this.nzIndicator=null,this.nzSize="default",this.nzTip=null,this.nzDelay=0,this.nzSimple=!1,this.nzSpinning=!0,this.destroy$=new w,this.spinning$=new x(this.nzSpinning),this.delay$=new M(1),this.isLoading=!1,this.dir="ltr"}ngOnInit(){var e;this.delay$.pipe(k(this.nzDelay),O(),j(o=>o===0?this.spinning$:this.spinning$.pipe(N(l=>T(l?o:0)))),f(this.destroy$)).subscribe(o=>{this.isLoading=o,this.cdr.markForCheck()}),this.nzConfigService.getConfigChangeEventForComponent(oi).pipe(f(this.destroy$)).subscribe(()=>this.cdr.markForCheck()),(e=this.directionality.change)==null||e.pipe(f(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(i){let{nzSpinning:e,nzDelay:o}=i;e&&this.spinning$.next(this.nzSpinning),o&&this.delay$.next(this.nzDelay)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(e){return new(e||t)(d(Y),d(y),d(X))},t.\u0275cmp=g({type:t,selectors:[["nz-spin"]],hostVars:2,hostBindings:function(e,o){e&2&&v("ant-spin-nested-loading",!o.nzSimple)},inputs:{nzIndicator:"nzIndicator",nzSize:"nzSize",nzTip:"nzTip",nzDelay:[2,"nzDelay","nzDelay",G],nzSimple:[2,"nzSimple","nzSimple",b],nzSpinning:[2,"nzSpinning","nzSpinning",b]},exportAs:["nzSpin"],standalone:!0,features:[$,F,B],ngContentSelectors:ci,decls:4,vars:2,consts:[["defaultTemplate",""],[1,"ant-spin-container",3,"ant-spin-blur"],[1,"ant-spin-dot","ant-spin-dot-spin"],[1,"ant-spin-dot-item"],[1,"ant-spin"],[3,"ngTemplateOutlet"],[1,"ant-spin-text"],[1,"ant-spin-container"]],template:function(e,o){e&1&&(R(),h(0,pi,5,0,"ng-template",null,0,V)(2,fi,4,12,"div")(3,mi,2,2,"div",1)),e&2&&(s(2),C(o.isLoading?2:-1),s(),C(o.nzSimple?-1:3))},dependencies:[H],encapsulation:2});let n=t;return I([ii()],n.prototype,"nzIndicator",void 0),n})(),di=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u({type:t}),t.\u0275inj=m({});let n=t;return n})();var ui=()=>({renderSideBySide:!1});function vi(n,t){n&1&&z(0,"nz-spin",3)}var ai=(()=>{let t=class t{get showCodeEditor(){return!this.opening&&!this.isDiffMode}get showDiffEditor(){return!this.opening&&this.isDiffMode}get isDiffMode(){var i,e;return!!((e=(i=this.request)==null?void 0:i.options)!=null&&e.diff)}constructor(i,e,o,l){this.monacoService=i,this.editorService=e,this.changeDetectorRef=o,this.notificationService=l,this.disposables=[],this.subscriptions=[],this.opening=!0}ngOnInit(){this.subscriptions.push(this.editor.onChangeRequest.subscribe(i=>{this.request=i,this.opening=!0,this.changeDetectorRef.markForCheck(),this.handleRequest()})),this.subscriptions.push(this.editorService.editorGroups.subscribe(()=>{setTimeout(()=>{var i;(i=this.codeEditor)==null||i.layout(),this.changeDetectorRef.markForCheck()},300)}))}ngOnDestroy(){this.disposables.forEach(i=>i.dispose()),this.subscriptions.forEach(i=>i.unsubscribe()),this.codeEditor&&this.monacoService.onDisposeEditor(this.codeEditor)}onCreateEditor(i){this.monacoService.onCreateEditor(this.codeEditor=i),this.handleRequest()}onCreateDiffEditor(i){this.diffEditor=i,this.monacoService.onCreateEditor(i.getModifiedEditor()),this.handleRequest()}handleRequest(){return D(this,null,function*(){if(!this.codeEditor||!this.diffEditor||!this.request)return;let i=this.request.options||{};if(!this.request.file)throw new Error("code-editor: File to open not specified");try{yield this.monacoService.open({file:this.request.file,editor:this.codeEditor,position:i.position})}catch(e){this.notificationService.publishError(e)}finally{this.opening=!1,this.changeDetectorRef.markForCheck()}this.handleDiffOptions(i)})}handleDiffOptions(i){if(i.diff){let e=this.codeEditor.getModel();this.diffEditor.setModel({original:monaco.editor.createModel(i.diff,e.getLanguageId()),modified:monaco.editor.createModel(e.getValue(),e.getLanguageId())}),this.diffEditor.updateOptions({readOnly:this.codeEditor.getRawOptions().readOnly}),this.diffEditor.getModifiedEditor().focus()}}};t.\u0275fac=function(e){return new(e||t)(d(ni),d(ei),d(y),d(ti))},t.\u0275cmp=g({type:t,selectors:[["ide-code-editor"]],inputs:{editor:"editor"},decls:3,vars:5,consts:[[3,"ready","hidden"],[3,"ready","hidden","options"],["class","center","nzSize","large",4,"ngIf"],["nzSize","large",1,"center"]],template:function(e,o){e&1&&(a(0,"nge-monaco-editor",0),_("ready",function(E){return o.onCreateEditor(E)}),c(),a(1,"nge-monaco-diff-editor",1),_("ready",function(E){return o.onCreateDiffEditor(E)}),c(),h(2,vi,1,0,"nz-spin",2)),e&2&&(p("hidden",!o.showCodeEditor),s(),p("hidden",!o.showDiffEditor)("options",U(4,ui)),s(),p("ngIf",o.opening))},dependencies:[W,si,K,J],styles:["[_nghost-%COMP%]{display:block;height:100%;width:100%;position:relative}.center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}[_nghost-%COMP%]  .drop-controller-widget{background-color:var(--drop-controller-widget-background, #fff);color:var(--drop-controller-widget-color, #333);border:1px solid var(--drop-controller-widget-border, #ddd);box-shadow:var(--drop-controller-widget-box-shadow, 0 2px 8px rgba(0, 0, 0, .1));padding:0;border-radius:4px;white-space:nowrap;z-index:100}[_nghost-%COMP%]  .drop-controller-widget div{padding:8px 12px;cursor:pointer;transition:background-color .3s,color .3s}[_nghost-%COMP%]  .drop-controller-widget div:hover{background-color:var(--drop-controller-widget-hover-background, #f3f3f3);color:var(--drop-controller-widget-hover-color, #333)}"]});let n=t;return n})();var Li=(()=>{let t=class t{constructor(){this.component=ai}};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u({type:t}),t.\u0275inj=m({imports:[Z,di,Q]});let n=t;return n})();export{si as a,di as b,Li as c};
